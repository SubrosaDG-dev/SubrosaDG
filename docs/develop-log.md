## SubrosaDG Project Develop Log

### 2023-10-13

1. 目前项目整体已经完成gmsh网格读取(三角四边混合网格),积分信息的获取与存储,二维Euler方程的计算以及进行高阶重构后的tecplot输出.无粘格式采用Roe格式,时间推进实现了前向Euler以及三阶SSP Runta-Kutta.

2. 目前存在的问题主要有在物面边界条件下三角网格计算不正确,会出现负压力,初步debug后感觉疑似是在进行局部质量矩阵与残差相乘后过大导致负压力,但是在全远场的情况下计算本身非常稳定,这至少保证了体积分和面积分本身的计算过程是没有问题的.在四边形作为物面边界进行计算时能保持稳定,但是如果扰动传播到三角网格后云图上还是能发现一些非物理的现象.

3. 在后处理过程中进行的高阶结果重构效果并不理想,表现为云图上出现规律性的波动,这种波动本身是和流场无关的,在那些地方很明显应该是连续且平滑的.虽然这里采用的是相邻点平均的算法,但是理论上DG的结果应该是能在一个单元内本身就保持一定的单调性的.目前怀疑有可能和上面的问题同源,但不排除是这样的重构方法本身从理论上就不可行,因为也没有检索到这样操作的文献.如果是后者,要么就抛弃高阶重构的方法,要么就只能去找寻一个更加适合DG的后处理格式.

4. 整套基于C++的非类型模版参数的静态分发系统过于复杂,这个会增加后续维护的难度,目前这个架构并不适合继续改动,需要等到后续完成到三维的NS方程后根据明确的需求进行整体的架构设计,可以使用纯数据结构加依赖注入的模式,这可以使用C++的CRTP来很轻松的实现.

5. 对于目前发生的计算不准确的问题大概率并不来源于代码编写,更大概率是由于对于本身算法理解不到位导致的.因此接下来可能不会继续debug,而是更多的考虑验证一下目前为止推出的公式以及验证DG空间离散部分的细节,后续可以等交叉验证的结果.

6. 现在无粘通量格式本身只实现了Roe格式,接下来考虑实现LF和HLLC格式,通量格式这一部分本身和计算代码解耦,因此可以单独实现.

7. 边界条件上,现在使用的亚音速远场边界条件本身是不正确的.如果物面表面导致的扰动在到达边界前并没有耗散完的话,这个边界条件会导致扰动反射回来,因此其本身是不满足物理的.正确的做法应该是使用无反射边界条件,并且区分亚音速和超音速,这个可以用边界处的法向Mach数进行判断.还有就是绝热物面边界,这里有很多种形式,有使用dummy节点的,有直接给出物面上的物理量的,还有直接算出边界上通量大小的,这几种方法是否等价还需要理论验证.

### 2023-10-30

1. 就物面边界处三角网格计算异常的问题这里猜测可能是由于物面边界处单元的物理阶数与计算阶数不匹配导致,这里尝试使用新的也就是四边形绕流算例来测试.但其实这首先不能解释四边形网格计算导致的棋盘形波动,其次对于原来的圆柱绕流你本身也可以将其看成一个多面体绕流计算,因此这仅仅作为一个猜测,这里会使用纯三角网格来计算测试.

2. 对于猜测的局部质量矩阵的异常,目前可以选取某一个特定的单元与解析结果进行比较,这里可以用一套特定的测试网格来进行手动计算,这样可以验证局部质量矩阵的计算是否正确.

3. 对于曲面单元的高阶重构这个问题,应该是必须要解决的问题,目前主要的问题是如何处理第一层网格拉伸后导致后面几层网格也需要拉伸的问题,这里涉及到内部网格,仅使用边界条件是无法解决的.这里应该不会考虑放弃gmsh,手动实现一个网格软件的难度太大.
